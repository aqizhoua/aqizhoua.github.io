<!DOCTYPE html>


<html theme="dark" showBanner="true" hasBanner="false" > 
<link href="https://cdn.staticfile.org/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet">
<link href="https://cdn.staticfile.org/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet">
<link href="https://cdn.staticfile.org/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet">
<script src="/js/color.global.min.js" ></script>
<script src="/js/load-settings.js" ></script>
<head>
  <meta charset="utf-8">
  
  
  

  
  <title>lesson4-XTuner å¤§æ¨¡å‹å•å¡ä½æˆæœ¬å¾®è°ƒå®æˆ˜ | aqizhoua</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="preload" href="/css/fonts/Roboto-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
  <link rel="preload" href="/css/fonts/Roboto-Bold.ttf" as="font" type="font/ttf" crossorigin="anonymous">

  <meta name="description" content="åœ¨lesson3ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ äº†ä¸¤ç§å¤§æ¨¡å‹çš„å¼€å‘èŒƒå¼ï¼Œå¹¶è¯¦ç»†å­¦ä¹ äº†å…¶ä¸­çš„RAGã€‚æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ ç¬¬äºŒç§èŒƒå¼ï¼ŒFinetuneï¼Œå¹¶ä½¿ç”¨XTuneråŸºäºInternLMè¿›è¡Œå•å¡å¾®è°ƒã€‚åœ¨æ™®é€šçš„å­¦ä¹ ä¸­ï¼ŒLLMæ²¡åŠæ³•å¾ˆå¥½çš„åº”ç”¨äºå…·ä½“çš„å®é™…å’Œæ¿å—ï¼Œå› æ­¤éœ€è¦å¾®è°ƒæ¥å®šåˆ¶ã€‚å¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒæœ‰ä¸¤ç§ç­–ç•¥ï¼Œå¢åŠ æ•°æ®é›†å’ŒæŒ‡ä»¤å¾®è°ƒã€‚XTuneræ˜¯æ‰“åŒ…å¥½çš„å¾®è°ƒå·¥å…·ç®±ï¼Œå®ƒçš„å¾®è°ƒåŸç†æ˜¯LoRA&amp;QLoRAï¼Œèƒ½å¤Ÿå‡å°‘æ˜¾">
<meta property="og:type" content="article">
<meta property="og:title" content="lesson4-XTuner å¤§æ¨¡å‹å•å¡ä½æˆæœ¬å¾®è°ƒå®æˆ˜">
<meta property="og:url" content="https://aqizhoua.github.io/poster/da5283fb.html">
<meta property="og:site_name" content="aqizhoua">
<meta property="og:description" content="åœ¨lesson3ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ äº†ä¸¤ç§å¤§æ¨¡å‹çš„å¼€å‘èŒƒå¼ï¼Œå¹¶è¯¦ç»†å­¦ä¹ äº†å…¶ä¸­çš„RAGã€‚æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ ç¬¬äºŒç§èŒƒå¼ï¼ŒFinetuneï¼Œå¹¶ä½¿ç”¨XTuneråŸºäºInternLMè¿›è¡Œå•å¡å¾®è°ƒã€‚åœ¨æ™®é€šçš„å­¦ä¹ ä¸­ï¼ŒLLMæ²¡åŠæ³•å¾ˆå¥½çš„åº”ç”¨äºå…·ä½“çš„å®é™…å’Œæ¿å—ï¼Œå› æ­¤éœ€è¦å¾®è°ƒæ¥å®šåˆ¶ã€‚å¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒæœ‰ä¸¤ç§ç­–ç•¥ï¼Œå¢åŠ æ•°æ®é›†å’ŒæŒ‡ä»¤å¾®è°ƒã€‚XTuneræ˜¯æ‰“åŒ…å¥½çš„å¾®è°ƒå·¥å…·ç®±ï¼Œå®ƒçš„å¾®è°ƒåŸç†æ˜¯LoRA&amp;QLoRAï¼Œèƒ½å¤Ÿå‡å°‘æ˜¾">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/aqizhoua/picx-images-hosting@master/20240220/1.htszjh48y0o.webp">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/aqizhoua/picx-images-hosting@master/20240220/2.51mblfkfg0k0.webp">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/aqizhoua/picx-images-hosting@master/20240220/3.20ps3yrg6zpc.webp">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/aqizhoua/picx-images-hosting@master/20240220/4.7by36umhqxo0.webp">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/aqizhoua/picx-images-hosting@master/20240220/5.6qpwqotskeg0.webp">
<meta property="article:published_time" content="2024-01-20T05:26:38.000Z">
<meta property="article:modified_time" content="2024-02-20T15:08:23.349Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="ä¹¦ç”Ÿæµ¦è¯­å¤§æ¨¡å‹å®æˆ˜è¥">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/aqizhoua/picx-images-hosting@master/20240220/1.htszjh48y0o.webp">
  
  
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-32.png" sizes="32x32">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-128.png" sizes="128x128">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-180.png" sizes="180x180">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-192.png" sizes="192x192">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-32.png" sizes="32x32">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-128.png" sizes="128x128">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-180.png" sizes="180x180">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-192.png" sizes="192x192">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  
   
  <div id="main-grid" class="shadow   ">
    <div id="nav" class=""  >
      <navbar id="navbar">
  <nav id="title-nav">
    <a href="/">
      <div id="vivia-logo">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <div>aqizhoua </div>
    </a>
  </nav>
  <nav id="main-nav">
    
      <a class="main-nav-link" href="/">Home</a>
    
      <a class="main-nav-link" href="/archives">Archives</a>
    
      <a class="main-nav-link" href="/fanren">Fanren</a>
    
      <a class="main-nav-link" href="/geek">geek</a>
    
  </nav>
  <nav id="sub-nav">
    <a id="theme-btn" class="nav-icon">
      <span class="light-mode-icon"><svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20"><path d="M438.5-829.913v-48q0-17.452 11.963-29.476 11.964-12.024 29.326-12.024 17.363 0 29.537 12.024t12.174 29.476v48q0 17.452-11.963 29.476-11.964 12.024-29.326 12.024-17.363 0-29.537-12.024T438.5-829.913Zm0 747.826v-48q0-17.452 11.963-29.476 11.964-12.024 29.326-12.024 17.363 0 29.537 12.024t12.174 29.476v48q0 17.452-11.963 29.476-11.964 12.024-29.326 12.024-17.363 0-29.537-12.024T438.5-82.087ZM877.913-438.5h-48q-17.452 0-29.476-11.963-12.024-11.964-12.024-29.326 0-17.363 12.024-29.537t29.476-12.174h48q17.452 0 29.476 11.963 12.024 11.964 12.024 29.326 0 17.363-12.024 29.537T877.913-438.5Zm-747.826 0h-48q-17.452 0-29.476-11.963-12.024-11.964-12.024-29.326 0-17.363 12.024-29.537T82.087-521.5h48q17.452 0 29.476 11.963 12.024 11.964 12.024 29.326 0 17.363-12.024 29.537T130.087-438.5Zm660.174-290.87-34.239 32q-12.913 12.674-29.565 12.174-16.653-.5-29.327-13.174-12.674-12.673-12.554-28.826.12-16.152 12.794-28.826l33-35q12.913-12.674 30.454-12.674t30.163 12.847q12.709 12.846 12.328 30.826-.38 17.98-13.054 30.653ZM262.63-203.978l-32 34q-12.913 12.674-30.454 12.674t-30.163-12.847q-12.709-12.846-12.328-30.826.38-17.98 13.054-30.653l33.239-31q12.913-12.674 29.565-12.174 16.653.5 29.327 13.174 12.674 12.673 12.554 28.826-.12 16.152-12.794 28.826Zm466.74 33.239-32-33.239q-12.674-12.913-12.174-29.565.5-16.653 13.174-29.327 12.673-12.674 28.826-13.054 16.152-.38 28.826 12.294l35 33q12.674 12.913 12.674 30.454t-12.847 30.163q-12.846 12.709-30.826 12.328-17.98-.38-30.653-13.054ZM203.978-697.37l-34-33q-12.674-12.913-13.174-29.945-.5-17.033 12.174-29.707t31.326-13.293q18.653-.62 31.326 13.054l32 34.239q11.674 12.913 11.174 29.565-.5 16.653-13.174 29.327-12.673 12.674-28.826 12.554-16.152-.12-28.826-12.794ZM480-240q-100 0-170-70t-70-170q0-100 70-170t170-70q100 0 170 70t70 170q0 100-70 170t-170 70Zm-.247-82q65.703 0 111.475-46.272Q637-414.544 637-480.247t-45.525-111.228Q545.95-637 480.247-637t-111.475 45.525Q323-545.95 323-480.247t45.525 111.975Q414.05-322 479.753-322ZM481-481Z"/></svg></span>
      <span class="dark-mode-icon"><svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20"><path d="M480.239-116.413q-152.63 0-258.228-105.478Q116.413-327.37 116.413-480q0-130.935 77.739-227.435t206.304-125.043q43.022-9.631 63.87 10.869t3.478 62.805q-8.891 22.043-14.315 44.463-5.424 22.42-5.424 46.689 0 91.694 64.326 155.879 64.325 64.186 156.218 64.186 24.369 0 46.978-4.946 22.609-4.945 44.413-14.076 42.826-17.369 62.967 1.142 20.142 18.511 10.511 61.054Q807.174-280 712.63-198.206q-94.543 81.793-232.391 81.793Zm0-95q79.783 0 143.337-40.217 63.554-40.218 95.793-108.283-15.608 4.044-31.097 5.326-15.49 1.283-31.859.805-123.706-4.066-210.777-90.539-87.071-86.473-91.614-212.092-.24-16.369.923-31.978 1.164-15.609 5.446-30.978-67.826 32.478-108.282 96.152Q211.652-559.543 211.652-480q0 111.929 78.329 190.258 78.329 78.329 190.258 78.329ZM466.13-465.891Z"/></svg></span>
    </a>
    
    <div id="nav-menu-btn" class="nav-icon">
      <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20"><path d="M177.37-252.282q-17.453 0-29.477-11.964-12.024-11.963-12.024-29.326t12.024-29.537q12.024-12.174 29.477-12.174h605.26q17.453 0 29.477 11.964 12.024 11.963 12.024 29.326t-12.024 29.537q-12.024 12.174-29.477 12.174H177.37Zm0-186.218q-17.453 0-29.477-11.963-12.024-11.964-12.024-29.326 0-17.363 12.024-29.537T177.37-521.5h605.26q17.453 0 29.477 11.963 12.024 11.964 12.024 29.326 0 17.363-12.024 29.537T782.63-438.5H177.37Zm0-186.217q-17.453 0-29.477-11.964-12.024-11.963-12.024-29.326t12.024-29.537q12.024-12.174 29.477-12.174h605.26q17.453 0 29.477 11.964 12.024 11.963 12.024 29.326t-12.024 29.537q-12.024 12.174-29.477 12.174H177.37Z"/></svg>
    </div>
  </nav>
</navbar>
<div id="nav-dropdown" class="hidden">
  <div id="dropdown-link-list">
    
      <a class="nav-dropdown-link" href="/">Home</a>
    
      <a class="nav-dropdown-link" href="/archives">Archives</a>
    
      <a class="nav-dropdown-link" href="/fanren">Fanren</a>
    
      <a class="nav-dropdown-link" href="/geek">geek</a>
    
     
    </div>
</div>
<script>
  let dropdownBtn = document.getElementById("nav-menu-btn");
  let dropdownEle = document.getElementById("nav-dropdown");
  dropdownBtn.onclick = function() {
    dropdownEle.classList.toggle("hidden");
  }
</script>
    </div>
    <div id="sidebar-wrapper">
      <sidebar id="sidebar">
  
    <div class="widget-wrap">
  <div class="info-card">
    <div class="avatar">
      
        <image src=/sleep.jpg></image>
      
      <div class="img-dim"></div>
    </div>
    <div class="info">
      <div class="username">aqizhoua </div>
      <div class="dot"></div>
      <div class="subtitle">äººç”Ÿæ˜¯æ—·é‡ </div>
      <div class="link-list">
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://github.com/aqizhoua" title="GitHub"><i class="fa-brands fa-github"></i></a>
         
      </div>  
    </div>
  </div>
</div>

  
  <div class="sticky">
    
      


  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">Categories</h3>
      <div class="category-box"></div>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">Tags</h3>
      <ul class="widget-tag-list" itemprop="keywords"><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/MOT/" rel="tag">MOT</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/smtp/" rel="tag">smtp</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E4%B9%A6%E7%94%9F%E6%B5%A6%E8%AF%AD%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AE%9E%E6%88%98%E8%90%A5/" rel="tag">ä¹¦ç”Ÿæµ¦è¯­å¤§æ¨¡å‹å®æˆ˜è¥</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86/" rel="tag">æ•°å­¦çŸ¥è¯†</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/" rel="tag">æ¯æ—¥ä¸€é¢˜</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">Archives</h3>
      
      
        <a class="archive-link" href="/archives/2024/02 ">
          February 2024 
          <div class="archive-count">1 </div>
        </a>
      
        <a class="archive-link" href="/archives/2024/01 ">
          January 2024 
          <div class="archive-count">14 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/11 ">
          November 2023 
          <div class="archive-count">5 </div>
        </a>
      
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">Recent Posts</h3>
      <ul>
        
          <a class="recent-link" href="/poster/7c2a4ef3.html" title="1690. çŸ³å­æ¸¸æˆ VII" >
            <div class="recent-link-text">
              1690. çŸ³å­æ¸¸æˆ VII
            </div>
          </a>
        
          <a class="recent-link" href="/poster/2b0ec29a.html" title="2808. ä½¿å¾ªç¯æ•°ç»„æ‰€æœ‰å…ƒç´ ç›¸ç­‰çš„æœ€å°‘ç§’æ•°" >
            <div class="recent-link-text">
              2808. ä½¿å¾ªç¯æ•°ç»„æ‰€æœ‰å…ƒç´ ç›¸ç­‰çš„æœ€å°‘ç§’æ•°
            </div>
          </a>
        
          <a class="recent-link" href="/poster/7082c407.html" title="2861. æœ€å¤§åˆé‡‘æ•°" >
            <div class="recent-link-text">
              2861. æœ€å¤§åˆé‡‘æ•°
            </div>
          </a>
        
          <a class="recent-link" href="/poster/28e988a7.html" title="410-åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼" >
            <div class="recent-link-text">
              410-åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼
            </div>
          </a>
        
          <a class="recent-link" href="/poster/da5283fb.html" title="lesson4-XTuner å¤§æ¨¡å‹å•å¡ä½æˆæœ¬å¾®è°ƒå®æˆ˜" >
            <div class="recent-link-text">
              lesson4-XTuner å¤§æ¨¡å‹å•å¡ä½æˆæœ¬å¾®è°ƒå®æˆ˜
            </div>
          </a>
        
      </ul>
    </div>
  </div>

    
  </div>
</sidebar>
    </div>
    <div id="content-body">
       


<article id="post-lesson4-XTuner-å¤§æ¨¡å‹å•å¡ä½æˆæœ¬å¾®è°ƒå®æˆ˜" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
    
   
  <div class="article-inner">
    <div class="article-main">
      <header class="article-header">
        
<div class="main-title-bar">
  <div class="main-title-dot"></div>
  
    
      <h1 class="p-name article-title" itemprop="headline name">
        lesson4-XTuner å¤§æ¨¡å‹å•å¡ä½æˆæœ¬å¾®è°ƒå®æˆ˜
      </h1>
    
  
</div>

        <div class='meta-info-bar'>
          <div class="meta-info">
  <time class="dt-published" datetime="2024-01-20T05:26:38.000Z" itemprop="datePublished">2024-01-20</time>
</div>
          <div class="need-seperator meta-info">
            <div class="meta-cate-flex">
  
  <a class="meta-cate-link" href="/categories/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">å¤§æ¨¡å‹</a>
   
</div>
  
          </div>
          <div class="wordcount need-seperator meta-info">
            12k words 
          </div>
        </div>
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B9%A6%E7%94%9F%E6%B5%A6%E8%AF%AD%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AE%9E%E6%88%98%E8%90%A5/" rel="tag">ä¹¦ç”Ÿæµ¦è¯­å¤§æ¨¡å‹å®æˆ˜è¥</a></li></ul>

      </header>
      <div class="e-content article-entry" itemprop="articleBody">
        
          <p>åœ¨lesson3ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ äº†ä¸¤ç§å¤§æ¨¡å‹çš„å¼€å‘èŒƒå¼ï¼Œå¹¶è¯¦ç»†å­¦ä¹ äº†å…¶ä¸­çš„<code>RAG</code>ã€‚æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ ç¬¬äºŒç§èŒƒå¼ï¼Œ<code>Finetune</code>ï¼Œå¹¶ä½¿ç”¨<code>XTuner</code>åŸºäº<code>InternLM</code>è¿›è¡Œå•å¡å¾®è°ƒã€‚åœ¨æ™®é€šçš„å­¦ä¹ ä¸­ï¼Œ<code>LLM</code>æ²¡åŠæ³•å¾ˆå¥½çš„åº”ç”¨äºå…·ä½“çš„å®é™…å’Œæ¿å—ï¼Œå› æ­¤éœ€è¦å¾®è°ƒæ¥å®šåˆ¶ã€‚å¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒæœ‰ä¸¤ç§ç­–ç•¥ï¼Œå¢åŠ æ•°æ®é›†å’ŒæŒ‡ä»¤å¾®è°ƒã€‚<code>XTuner</code>æ˜¯æ‰“åŒ…å¥½çš„å¾®è°ƒå·¥å…·ç®±ï¼Œå®ƒçš„å¾®è°ƒåŸç†æ˜¯<code>LoRA</code>&amp;<code>QLoRA</code>ï¼Œèƒ½å¤Ÿå‡å°‘æ˜¾å­˜å ç”¨ï¼Œä½¿å¼€å‘è€…ä¸“æ³¨æ•°æ®å†…å®¹è€Œä¸æ˜¯æ ¼å¼ã€‚</p>
<h1 id="XTuneræ¦‚è¿°"><a href="#XTuneræ¦‚è¿°" class="headerlink" title="XTuneræ¦‚è¿°"></a>XTuneræ¦‚è¿°</h1><h2 id="Finetune"><a href="#Finetune" class="headerlink" title="Finetune"></a>Finetune</h2><p><code>Finetune</code>æ˜¯å¤§æ¨¡å‹å¸¸è§çš„ä¸¤ç§èŒƒå¼ä¹‹ä¸€ï¼Œå®ƒçš„æ ¸å¿ƒï¼šåœ¨å·²æœ‰æ•°æ®é›†ä¸Šå¾®è°ƒ</p>
<ul>
<li>å¯ä»¥è¿›è¡Œæ›´å¤š<strong>ä¸ªæ€§åŒ–</strong>å¾®è°ƒï¼Œä»¥æ»¡è¶³ç”¨æˆ·éœ€æ±‚ã€‚</li>
<li>éœ€è¦åœ¨æ–°çš„æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æˆæœ¬ä¸Šå‡ã€‚ç„¶è€Œï¼Œè¿™ä¹Ÿæ„å‘³ç€æ¨¡å‹å¯ä»¥æ›´å¥½åœ°é€‚åº”ä¸æ–­å˜åŒ–çš„ç¯å¢ƒã€‚</li>
<li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºè®­ç»ƒæˆæœ¬è¾ƒé«˜ï¼Œæ¨¡å‹çš„æ›´æ–°å¯èƒ½ä¸æ˜¯å®æ—¶çš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥å®šæœŸè¿›è¡Œæ›´æ–°ä»¥ç¡®ä¿å…¶æ€§èƒ½å§‹ç»ˆä¿æŒåœ¨æœ€ä½³çŠ¶æ€ã€‚</li>
</ul>
<h2 id="LLM"><a href="#LLM" class="headerlink" title="LLM"></a>LLM</h2><p><code>LLM</code>å°±æ˜¯å¤§è¯­è¨€æ¨¡å‹çš„ç»Ÿç§°ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œ<code>LangChain</code>å°è£…äº†å¾ˆå¤šç»„ä»¶ï¼Œé€šè¿‡å°†è¿™äº›ç»„ä»¶ç»„åˆï¼Œä¸€ä¸ª<code>chain</code>èƒ½å¤Ÿå°è£…ä¸€ç³»åˆ—çš„<code>LLM</code>æ“ä½œã€‚</p>
<h2 id="XTuner"><a href="#XTuner" class="headerlink" title="XTuner"></a>XTuner</h2><p><code>XTuner</code>æ˜¯æ‰“åŒ…å¥½çš„å¾®è°ƒå·¥å…·ç®±ï¼Œæ”¯æŒ<code>Huggingface</code>å’Œ<code>modelscope</code>åŠ è½½æ¨¡å‹å’Œæ•°æ®é›†ã€‚æ”¯æŒå¤šæ¬¾å¼€æºå¤§æ¨¡å‹<code>InternLM</code>ï¼Œé˜¿é‡Œåƒé—®ï¼Œç™¾å·å¤§æ¨¡å‹ï¼Œæ¸…å<code>Chatglm</code>ï¼Œå¤šä¸“å®¶æ¨¡å‹ç­‰ï¼ŒåŠ é€Ÿç®—æ³•ç­‰ç­‰éƒ½æœ‰ã€‚</p>
<h1 id="å¾®è°ƒæ¡†æ¶XtuneråŸç†"><a href="#å¾®è°ƒæ¡†æ¶XtuneråŸç†" class="headerlink" title="å¾®è°ƒæ¡†æ¶XtuneråŸç†"></a>å¾®è°ƒæ¡†æ¶XtuneråŸç†</h1><h2 id="Finetuneç®€ä»‹"><a href="#Finetuneç®€ä»‹" class="headerlink" title="Finetuneç®€ä»‹"></a>Finetuneç®€ä»‹</h2><ul>
<li><p><strong>ä¸ºä»€ä¹ˆè¦å¾®è°ƒå¤§è¯­è¨€æ¨¡å‹ï¼Ÿ</strong> </p>
<ul>
<li>åœ¨æ™®é€šçš„å­¦ä¹ ä¸­ï¼ŒLLMæ²¡åŠæ³•å¾ˆå¥½çš„åº”ç”¨äºå…·ä½“çš„å®é™…å’Œæ¿å—ï¼Œéœ€è¦å¾®è°ƒæ¥å®šåˆ¶ï¼</li>
</ul>
</li>
<li><p>å¸¸è§çš„ä¸¤ç§å¾®è°ƒç­–ç•¥ï¼ˆè®­ç»ƒæ•°æ®çš„å¤„ç†ï¼‰ï¼š</p>
<ul>
<li><p><strong>å¢é‡é¢„è®­ç»ƒ</strong></p>
<ul>
<li>ç»™æ¨¡å‹æŠ•å–‚æ–°çŸ¥è¯†ï¼Œå­¦æ›´å¤šæœ‰å…³ç›®æ ‡é¢†åŸŸçš„æ–‡æœ¬å†…å®¹</li>
<li>ä¸éœ€è¦é—®é¢˜ï¼Œåªéœ€è¦å›ç­”ï¼Œéƒ½æ˜¯é™ˆè¿°å¥</li>
</ul>
</li>
<li><p><strong>æŒ‡ä»¤è·Ÿéšå¾®è°ƒ</strong></p>
<ul>
<li>èƒ½è®©æ¨¡å‹çš„è¾“å‡ºæ›´ç¬¦åˆæˆ‘ä»¬çš„æ„å›¾</li>
<li>å°†pretrained LLMæŒ‡ä»¤å¾®è°ƒæˆinstructed LLM</li>
<li>Xtuneræ‰“åŒ…å¥½çš„å·¥å…·ï¼šæŒ‡ä»¤è·Ÿéšå¾®è°ƒ<ul>
<li>æ„å»ºå¯¹è¯æ¨¡æ¿ï¼Œè¿›è¡Œè§’è‰²æŒ‡å®šï¼šå°†é—®é¢˜éƒ¨åˆ†æŒ‡å®šç»™userï¼Œå°†ç­”æ¡ˆæŒ‡å®šç»™assistantï¼Œç»™æ¨¡å‹ä¸€ä¸ªå®šä½system</li>
<li>è¾“å…¥æ¨¡å‹ï¼Œè®¡ç®—ç­”æ¡ˆassistantéƒ¨åˆ†æŸå¤±</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Xtunerä½¿ç”¨çš„å¾®è°ƒåŸç†ï¼šLoRA-amp-QLoRA"><a href="#Xtunerä½¿ç”¨çš„å¾®è°ƒåŸç†ï¼šLoRA-amp-QLoRA" class="headerlink" title="Xtunerä½¿ç”¨çš„å¾®è°ƒåŸç†ï¼šLoRA&amp;QLoRA"></a>Xtunerä½¿ç”¨çš„å¾®è°ƒåŸç†ï¼šLoRA&amp;QLoRA</h2><ul>
<li><p>Stable diffusionï¼šä¸åŒçš„LoRAèƒ½å¤Ÿå‡ºä¸åŒçš„é£æ ¼å’Œäººç‰©</p>
</li>
<li><p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨LoRAï¼Ÿä»€ä¹ˆæ˜¯LoRAï¼Ÿ</strong> å¦‚æœå¯¹æ•´ä¸ªæ¨¡å‹çš„æ‰€æœ‰å‚æ•°Linearéƒ½è¿›è¡Œè°ƒæ•´éœ€è¦å¾ˆå¤§çš„æ˜¾å­˜ï¼Œä½¿ç”¨LoRAæ–¹æ³•åœ¨åŸæœ¬çš„Linearæ—æ–°å¢ä¸€ä¸ªåˆ†æ”¯ï¼ŒåŒ…å«è¿ç»­çš„ä¸¤ä¸ªå°Linearï¼ˆå«åšAdapterï¼‰ï¼Œå°±èƒ½å‡å°‘å‚æ•°å’Œæ˜¾å­˜å¼€é”€ã€‚</p>
</li>
<li><p>å…¨å‚æ•°å¾®è°ƒ   VS  LoRA   VS   QLoRA QLoRAä½¿ç”¨4-bitæ¨¡å‹åŠ è½½å™¨ï¼Œä¸é‚£ä¹ˆç²¾ç¡®çš„åŠ è½½æ¨¡å‹ã€‚å‚æ•°ä¼˜åŒ–å™¨èƒ½å¤Ÿåœ¨CPUå’ŒGPUä¹‹é—´è°ƒåº¦ã€‚</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/aqizhoua/picx-images-hosting@master/20240220/1.htszjh48y0o.webp" alt></p>
<h1 id="Xtunerå¾®è°ƒå·¥ä½œæµç¨‹"><a href="#Xtunerå¾®è°ƒå·¥ä½œæµç¨‹" class="headerlink" title="Xtunerå¾®è°ƒå·¥ä½œæµç¨‹"></a>Xtunerå¾®è°ƒå·¥ä½œæµç¨‹</h1><p>Xtuneræœ‰å¼ºå¤§çš„æ•°æ®å¤„ç†å¼•æ“ï¼Œä½¿å¼€å‘è€…ä¸“æ³¨æ•°æ®å†…å®¹è€Œä¸æ˜¯æ ¼å¼</p>
<p><strong>æ•°æ®å¤„ç†æµç¨‹ï¼š</strong></p>
<p>1ã€åŸå§‹é—®ç­”å¯¹ï¼Œæ ¼å¼åŒ–ï¼ˆæ•°æ®é›†æ˜ å°„å‡½æ•°ï¼‰</p>
<p>2ã€æ ¼å¼åŒ–é—®ç­”å¯¹ï¼Œå¯è®­ç»ƒï¼ˆå¯¹è¯æ¨¡æ¿æ˜ å°„å‡½æ•°ï¼‰</p>
<p><strong>å¤šæ•°æ®æ ·æœ¬æ‹¼æ¥</strong></p>
<h1 id="å®æˆ˜ï¼šä½¿ç”¨XTunerå•å¡å¾®è°ƒå±äºè‡ªå·±çš„å¼€æºæ¨¡å‹ï¼ˆä»¥InternLMä¸ºåŸºåº•ï¼‰"><a href="#å®æˆ˜ï¼šä½¿ç”¨XTunerå•å¡å¾®è°ƒå±äºè‡ªå·±çš„å¼€æºæ¨¡å‹ï¼ˆä»¥InternLMä¸ºåŸºåº•ï¼‰" class="headerlink" title="å®æˆ˜ï¼šä½¿ç”¨XTunerå•å¡å¾®è°ƒå±äºè‡ªå·±çš„å¼€æºæ¨¡å‹ï¼ˆä»¥InternLMä¸ºåŸºåº•ï¼‰"></a>å®æˆ˜ï¼šä½¿ç”¨XTunerå•å¡å¾®è°ƒå±äºè‡ªå·±çš„å¼€æºæ¨¡å‹ï¼ˆä»¥InternLMä¸ºåŸºåº•ï¼‰</h1><h2 id="ç¯å¢ƒå®‰è£…"><a href="#ç¯å¢ƒå®‰è£…" class="headerlink" title="ç¯å¢ƒå®‰è£…"></a>ç¯å¢ƒå®‰è£…</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/root/share/install_conda_env_internlm_base.sh xtuner0.1.9</span><br><span class="line"></span><br><span class="line">conda activate xtuner0.1.9</span><br><span class="line"></span><br><span class="line">cd ~</span><br><span class="line"></span><br><span class="line">mkdir xtuner019 &amp;&amp; cd xtuner019</span><br><span class="line"></span><br><span class="line"># æ‹‰å– 0.1.9 çš„ç‰ˆæœ¬æºç </span><br><span class="line">git clone -b v0.1.9  https://github.com/InternLM/xtuner</span><br><span class="line"># æ— æ³•è®¿é—®githubçš„ç”¨æˆ·è¯·ä» gitee æ‹‰å–:</span><br><span class="line"># git clone -b v0.1.9 https://gitee.com/Internlm/xtuner</span><br><span class="line"></span><br><span class="line"># è¿›å…¥æºç ç›®å½•</span><br><span class="line">cd xtuner</span><br><span class="line"></span><br><span class="line"># ä»æºç å®‰è£… XTuner</span><br><span class="line">pip install -e &#x27;.[all]&#x27;</span><br></pre></td></tr></table></figure>
<p>å‡†å¤‡åœ¨ oasst1 æ•°æ®é›†ä¸Šå¾®è°ƒ internlm-7b-chat</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºä¸€ä¸ªå¾®è°ƒ oasst1 æ•°æ®é›†çš„å·¥ä½œè·¯å¾„ï¼Œè¿›å…¥</span><br><span class="line">mkdir ~/ft-oasst1 &amp;&amp; cd ~/ft-oasst1</span><br></pre></td></tr></table></figure>
<h2 id="å¾®è°ƒ"><a href="#å¾®è°ƒ" class="headerlink" title="å¾®è°ƒ"></a>å¾®è°ƒ</h2><h4 id="å‡†å¤‡é…ç½®æ–‡ä»¶"><a href="#å‡†å¤‡é…ç½®æ–‡ä»¶" class="headerlink" title="å‡†å¤‡é…ç½®æ–‡ä»¶"></a>å‡†å¤‡é…ç½®æ–‡ä»¶</h4><p>XTuner æä¾›å¤šä¸ªå¼€ç®±å³ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ä¸‹åˆ—å‘½ä»¤æŸ¥çœ‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># åˆ—å‡ºæ‰€æœ‰å†…ç½®é…ç½®</span><br><span class="line">xtuner list-cfg</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/aqizhoua/picx-images-hosting@master/20240220/2.51mblfkfg0k0.webp" alt></p>
<p>æ‹·è´ä¸€ä¸ªé…ç½®æ–‡ä»¶åˆ°å½“å‰ç›®å½•ï¼š<br><code># xtuner copy-cfg $&#123;CONFIG_NAME&#125; $&#123;SAVE_PATH&#125;</code></p>
<p>åœ¨æœ¬æ¡ˆä¾‹ä¸­å³ï¼šï¼ˆæ³¨æ„æœ€åæœ‰ä¸ªè‹±æ–‡å¥å·ï¼Œä»£è¡¨å¤åˆ¶åˆ°å½“å‰è·¯å¾„ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/ft-oasst1</span><br><span class="line">xtuner copy-cfg internlm_chat_7b_qlora_oasst1_e3 .</span><br></pre></td></tr></table></figure>
<p>é…ç½®æ–‡ä»¶åçš„è§£é‡Šï¼š</p>
<blockquote>
<p>xtuner copy-cfg internlm_chat_7b_qlora_oasst1_e3 .</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th>æ¨¡å‹å</th>
<th>internlm_chat_7b</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½¿ç”¨ç®—æ³•</td>
<td>qlora</td>
</tr>
<tr>
<td>æ•°æ®é›†</td>
<td>oasst1</td>
</tr>
<tr>
<td>æŠŠæ•°æ®é›†è·‘å‡ æ¬¡</td>
<td>è·‘3æ¬¡ï¼še3 (epoch 3 )</td>
</tr>
</tbody>
</table>
</div>
<p>*æ—  chatæ¯”å¦‚ <code>internlm-7b</code> ä»£è¡¨æ˜¯åŸºåº§(base)æ¨¡å‹</p>
<h4 id="æ¨¡å‹ä¸‹è½½"><a href="#æ¨¡å‹ä¸‹è½½" class="headerlink" title="æ¨¡å‹ä¸‹è½½"></a>æ¨¡å‹ä¸‹è½½</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /share/temp/model_repos/internlm-chat-7b ~/ft-oasst1/</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ˜¯é€šè¿‡è½¯é“¾çš„æ–¹å¼ï¼Œå°†æ¨¡å‹æ–‡ä»¶æŒ‚è½½åˆ°å®¶ç›®å½•ä¸‹ï¼Œä¼˜åŠ¿æ˜¯ï¼š</p>
<ol>
<li>èŠ‚çœæ‹·è´æ—¶é—´ï¼Œæ— éœ€ç­‰å¾…</li>
<li>èŠ‚çœç”¨æˆ·å¼€å‘æœºå­˜å‚¨ç©ºé—´</li>
</ol>
<blockquote>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨ <code>cp -r /share/temp/model_repos/internlm-chat-7b ~/ft-oasst1/</code> è¿›è¡Œæ•°æ®æ‹·è´ã€‚</p>
</blockquote>
<h4 id="æ•°æ®é›†ä¸‹è½½"><a href="#æ•°æ®é›†ä¸‹è½½" class="headerlink" title="æ•°æ®é›†ä¸‹è½½"></a>æ•°æ®é›†ä¸‹è½½</h4><h5 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h5><p>ä¸ºäº†æ¨åŠ¨å¤§è§„æ¨¡å¯¹é½ç ”ç©¶çš„æ°‘ä¸»åŒ–ï¼Œäº§ç”Ÿäº†OpenAssistant Conversationsï¼ˆOASST1ï¼‰æ•°æ®é›†ï¼Œè¿™æ˜¯ä¸€ä¸ª<strong>äººå·¥ç”Ÿæˆã€äººå·¥æ³¨é‡Šçš„åŠ©æ‰‹å¼å¯¹è¯è¯­æ–™åº“</strong>ï¼ŒåŒ…å«161,443ä¸ªæ¶ˆæ¯ï¼Œæ¶µç›–35ç§ä¸åŒçš„è¯­è¨€ï¼Œæ ‡æ³¨äº†461,292ä¸ªè´¨é‡è¯„åˆ†ï¼Œå…±æœ‰è¶…è¿‡10,000ä¸ªå®Œå…¨æ ‡æ³¨çš„å¯¹è¯æ ‘ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/ft-oasst1</span><br><span class="line"><span class="comment"># ...-guanaco åé¢æœ‰ä¸ªç©ºæ ¼å’Œè‹±æ–‡å¥å·å•Š</span></span><br><span class="line"><span class="built_in">cp</span> -r /root/share/temp/datasets/openassistant-guanaco .</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œå½“å‰è·¯å¾„çš„æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">|-- internlm-chat-7b -&gt; /share/temp/model_repos/internlm-chat-7b</span><br><span class="line">|-- internlm_chat_7b_qlora_oasst1_e3_copy.py</span><br><span class="line">`-- openassistant-guanaco</span><br><span class="line">    |-- openassistant_best_replies_eval.jsonl</span><br><span class="line">    `-- openassistant_best_replies_train.jsonl</span><br><span class="line"></span><br><span class="line">2 directories, 3 files</span><br></pre></td></tr></table></figure>
<h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><p>ä¿®æ”¹å…¶ä¸­çš„æ¨¡å‹å’Œæ•°æ®é›†ä¸º æœ¬åœ°è·¯å¾„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/ft-oasst1</span><br><span class="line">vim internlm_chat_7b_qlora_oasst1_e3_copy.py</span><br></pre></td></tr></table></figure>
<p>å‡å·ä»£è¡¨è¦åˆ é™¤çš„è¡Œï¼ŒåŠ å·ä»£è¡¨è¦å¢åŠ çš„è¡Œã€‚</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># ä¿®æ”¹æ¨¡å‹ä¸ºæœ¬åœ°è·¯å¾„</span><br><span class="line"><span class="deletion">- pretrained_model_name_or_path = &#x27;internlm/internlm-chat-7b&#x27;</span></span><br><span class="line"><span class="addition">+ pretrained_model_name_or_path = &#x27;./internlm-chat-7b&#x27;</span></span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹è®­ç»ƒæ•°æ®é›†ä¸ºæœ¬åœ°è·¯å¾„</span><br><span class="line"><span class="deletion">- data_path = &#x27;timdettmers/openassistant-guanaco&#x27;</span></span><br><span class="line"><span class="addition">+ data_path = &#x27;./openassistant-guanaco&#x27;</span></span><br></pre></td></tr></table></figure>
<p><strong>å¸¸ç”¨è¶…å‚</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>data_path</strong></td>
<td>æ•°æ®è·¯å¾„æˆ– HuggingFace ä»“åº“å</td>
</tr>
<tr>
<td>max_length</td>
<td>å•æ¡æ•°æ®æœ€å¤§ Token æ•°ï¼Œè¶…è¿‡åˆ™æˆªæ–­</td>
</tr>
<tr>
<td>pack_to_max_length</td>
<td>æ˜¯å¦å°†å¤šæ¡çŸ­æ•°æ®æ‹¼æ¥åˆ° max_lengthï¼Œæé«˜ GPU åˆ©ç”¨ç‡</td>
</tr>
<tr>
<td>accumulative_counts</td>
<td>æ¢¯åº¦ç´¯ç§¯ï¼Œæ¯å¤šå°‘æ¬¡ backward æ›´æ–°ä¸€æ¬¡å‚æ•°</td>
</tr>
<tr>
<td>evaluation_inputs</td>
<td>è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä¼šæ ¹æ®ç»™å®šçš„é—®é¢˜è¿›è¡Œæ¨ç†ï¼Œä¾¿äºè§‚æµ‹è®­ç»ƒçŠ¶æ€</td>
</tr>
<tr>
<td>evaluation_freq</td>
<td>Evaluation çš„è¯„æµ‹é—´éš” iter æ•°</td>
</tr>
<tr>
<td>â€¦â€¦</td>
<td>â€¦â€¦</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>å¦‚æœæƒ³æŠŠæ˜¾å¡çš„ç°å­˜åƒæ»¡ï¼Œå……åˆ†åˆ©ç”¨æ˜¾å¡èµ„æºï¼Œå¯ä»¥å°† <code>max_length</code> å’Œ <code>batch_size</code> è¿™ä¸¤ä¸ªå‚æ•°è°ƒå¤§ã€‚</p>
</blockquote>
<h4 id="å¼€å§‹å¾®è°ƒ"><a href="#å¼€å§‹å¾®è°ƒ" class="headerlink" title="å¼€å§‹å¾®è°ƒ"></a>å¼€å§‹å¾®è°ƒ</h4><p><strong>è®­ç»ƒï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xtuner train $&#123;CONFIG_NAME_OR_PATH&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä¹Ÿå¯ä»¥å¢åŠ  deepspeed è¿›è¡Œè®­ç»ƒåŠ é€Ÿï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xtuner train $&#123;CONFIG_NAME_OR_PATH&#125; --deepspeed deepspeed_zero2</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ QLoRA ç®—æ³•åœ¨ oasst1 æ•°æ®é›†ä¸Šå¾®è°ƒ InternLM-7Bï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•å¡</span></span><br><span class="line"><span class="comment">## ç”¨åˆšæ‰æ”¹å¥½çš„configæ–‡ä»¶è®­ç»ƒ</span></span><br><span class="line">xtuner train ./internlm_chat_7b_qlora_oasst1_e3_copy.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šå¡</span></span><br><span class="line">NPROC_PER_NODE=<span class="variable">$&#123;GPU_NUM&#125;</span> xtuner train ./internlm_chat_7b_qlora_oasst1_e3_copy.py</span><br><span class="line"><span class="comment"># è‹¥è¦å¼€å¯ deepspeed åŠ é€Ÿï¼Œå¢åŠ  --deepspeed deepspeed_zero2 å³å¯</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¾®è°ƒå¾—åˆ°çš„ PTH æ¨¡å‹æ–‡ä»¶å’Œå…¶ä»–æ‚ä¸ƒæ‚å…«çš„æ–‡ä»¶éƒ½é»˜è®¤åœ¨å½“å‰çš„ <code>./work_dirs</code> ä¸­ã€‚</p>
</blockquote>
<h4 id="å·¥å…·ï¼štmuxå­¦ä¹ "><a href="#å·¥å…·ï¼štmuxå­¦ä¹ " class="headerlink" title="å·¥å…·ï¼štmuxå­¦ä¹ "></a>å·¥å…·ï¼štmuxå­¦ä¹ </h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#æ›´æ–°æº</span><br><span class="line">apt update -y</span><br><span class="line">#å®‰è£…tmux</span><br><span class="line">apt install tmux -y</span><br><span class="line">#åœ¨è¿›å…¥è™šæ‹Ÿç¯å¢ƒåï¼Œåˆ›å»ºtmuxæ–°ä¼šè¯</span><br><span class="line">tmux new -s your-session-name</span><br><span class="line">#ctrl+B D é€€å‡ºä¼šè¯</span><br><span class="line">#é‡æ–°è¿›å…¥tmuxä¼šè¯</span><br><span class="line">tmux a -t your-session-name</span><br></pre></td></tr></table></figure>
<p>è·‘å®Œè®­ç»ƒåï¼Œå½“å‰è·¯å¾„ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/aqizhoua/picx-images-hosting@master/20240220/3.20ps3yrg6zpc.webp" alt="image-20240220221605919"></p>
<p>å°†å¾—åˆ°çš„ PTH æ¨¡å‹è½¬æ¢ä¸º HuggingFace æ¨¡å‹ï¼Œ<strong>å³ï¼šç”Ÿæˆ Adapter æ–‡ä»¶å¤¹</strong></p>
<p><code>xtuner convert pth_to_hf $&#123;CONFIG_NAME_OR_PATH&#125; $&#123;PTH_file_dir&#125; $&#123;SAVE_PATH&#125;</code></p>
<p>åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> hf</span><br><span class="line"><span class="built_in">export</span> MKL_SERVICE_FORCE_INTEL=1</span><br><span class="line"><span class="built_in">export</span> MKL_THREADING_LAYER=GNU</span><br><span class="line">xtuner convert pth_to_hf ./internlm_chat_7b_qlora_oasst1_e3_copy.py ./work_dirs/internlm_chat_7b_qlora_oasst1_e3_copy/epoch_1.pth ./hf</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/aqizhoua/picx-images-hosting@master/20240220/4.7by36umhqxo0.webp" alt></p>
<p>æ­¤æ—¶ï¼Œè·¯å¾„ä¸­åº”è¯¥é•¿è¿™æ ·ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">|-- hf</span><br><span class="line">|   |-- README.md</span><br><span class="line">|   |-- adapter_config.json</span><br><span class="line">|   |-- adapter_model.safetensors</span><br><span class="line">|   `-- xtuner_config.py</span><br><span class="line">|-- internlm-chat-7b -&gt; /share/temp/model_repos/internlm-chat-7b</span><br><span class="line">|-- internlm_chat_7b_qlora_oasst1_e3_copy.py</span><br><span class="line">|-- openassistant-guanaco</span><br><span class="line">|   |-- openassistant_best_replies_eval.jsonl</span><br><span class="line">|   `-- openassistant_best_replies_train.jsonl</span><br><span class="line">`-- work_dirs</span><br><span class="line">    `-- internlm_chat_7b_qlora_oasst1_e3_copy</span><br><span class="line">        |-- 20240220_163210</span><br><span class="line">        |   |-- 20240220_163210.<span class="built_in">log</span></span><br><span class="line">        |   `-- vis_data</span><br><span class="line">        |       |-- 20240220_163210.json</span><br><span class="line">        |       |-- config.py</span><br><span class="line">        |       `-- scalars.json</span><br><span class="line">        |-- epoch_1.pth</span><br><span class="line">        |   |-- bf16_zero_pp_rank_0_mp_rank_00_optim_states.pt</span><br><span class="line">        |   `-- mp_rank_00_model_states.pt</span><br><span class="line">        |-- internlm_chat_7b_qlora_oasst1_e3_copy.py</span><br><span class="line">        |-- last_checkpoint</span><br><span class="line">        `-- zero_to_fp32.py</span><br></pre></td></tr></table></figure>
<p><span style="color: red;"><strong>æ­¤æ—¶ï¼Œhf æ–‡ä»¶å¤¹å³ä¸ºæˆ‘ä»¬å¹³æ—¶æ‰€ç†è§£çš„æ‰€è°“ â€œLoRA æ¨¡å‹æ–‡ä»¶â€</strong></span></p>
<blockquote>
<p>å¯ä»¥ç®€å•ç†è§£ï¼šLoRA æ¨¡å‹æ–‡ä»¶ = Adapter</p>
</blockquote>
<h3 id="éƒ¨ç½²ä¸æµ‹è¯•"><a href="#éƒ¨ç½²ä¸æµ‹è¯•" class="headerlink" title="éƒ¨ç½²ä¸æµ‹è¯•"></a>éƒ¨ç½²ä¸æµ‹è¯•</h3><h4 id="å°†-HuggingFace-adapter-åˆå¹¶åˆ°å¤§è¯­è¨€æ¨¡å‹ï¼š"><a href="#å°†-HuggingFace-adapter-åˆå¹¶åˆ°å¤§è¯­è¨€æ¨¡å‹ï¼š" class="headerlink" title="å°† HuggingFace adapter åˆå¹¶åˆ°å¤§è¯­è¨€æ¨¡å‹ï¼š"></a>å°† HuggingFace adapter åˆå¹¶åˆ°å¤§è¯­è¨€æ¨¡å‹ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xtuner convert merge ./internlm-chat-7b ./hf ./merged --max-shard-size 2GB</span><br><span class="line"><span class="comment"># xtuner convert merge \</span></span><br><span class="line"><span class="comment">#     $&#123;NAME_OR_PATH_TO_LLM&#125; \</span></span><br><span class="line"><span class="comment">#     $&#123;NAME_OR_PATH_TO_ADAPTER&#125; \</span></span><br><span class="line"><span class="comment">#     $&#123;SAVE_PATH&#125; \</span></span><br><span class="line"><span class="comment">#     --max-shard-size 2GB</span></span><br></pre></td></tr></table></figure>
<h4 id="ä¸åˆå¹¶åçš„æ¨¡å‹å¯¹è¯ï¼š"><a href="#ä¸åˆå¹¶åçš„æ¨¡å‹å¯¹è¯ï¼š" class="headerlink" title="ä¸åˆå¹¶åçš„æ¨¡å‹å¯¹è¯ï¼š"></a>ä¸åˆå¹¶åçš„æ¨¡å‹å¯¹è¯ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŠ è½½ Adapter æ¨¡å‹å¯¹è¯ï¼ˆFloat 16ï¼‰</span></span><br><span class="line">xtuner chat ./merged --prompt-template internlm_chat</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4 bit é‡åŒ–åŠ è½½</span></span><br><span class="line"><span class="comment"># xtuner chat ./merged --bits 4 --prompt-template internlm_chat</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/aqizhoua/picx-images-hosting@master/20240220/5.6qpwqotskeg0.webp" alt></p>
<p><strong><code>xtuner chat</code></strong> <strong>çš„å¯åŠ¨å‚æ•°</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>å¯åŠ¨å‚æ•°</th>
<th>å¹²å“ˆæ»´</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>â€”prompt-template</strong></td>
<td>æŒ‡å®šå¯¹è¯æ¨¡æ¿</td>
</tr>
<tr>
<td>â€”system</td>
<td>æŒ‡å®šSYSTEMæ–‡æœ¬</td>
</tr>
<tr>
<td>â€”system-template</td>
<td>æŒ‡å®šSYSTEMæ¨¡æ¿</td>
</tr>
<tr>
<td>-<strong>-bits</strong></td>
<td>LLMä½æ•°</td>
</tr>
<tr>
<td>â€”bot-name</td>
<td>botåç§°</td>
</tr>
<tr>
<td>â€”with-plugins</td>
<td>æŒ‡å®šè¦ä½¿ç”¨çš„æ’ä»¶</td>
</tr>
<tr>
<td><strong>â€”no-streamer</strong></td>
<td>æ˜¯å¦å¯ç”¨æµå¼ä¼ è¾“</td>
</tr>
<tr>
<td><strong>â€”lagent</strong></td>
<td>æ˜¯å¦ä½¿ç”¨lagent</td>
</tr>
<tr>
<td>â€”command-stop-word</td>
<td>å‘½ä»¤åœæ­¢è¯</td>
</tr>
<tr>
<td>â€”answer-stop-word</td>
<td>å›ç­”åœæ­¢è¯</td>
</tr>
<tr>
<td>â€”offload-folder</td>
<td>å­˜æ”¾æ¨¡å‹æƒé‡çš„æ–‡ä»¶å¤¹ï¼ˆæˆ–è€…å·²ç»å¸è½½æ¨¡å‹æƒé‡çš„æ–‡ä»¶å¤¹ï¼‰</td>
</tr>
<tr>
<td>â€”max-new-tokens</td>
<td>ç”Ÿæˆæ–‡æœ¬ä¸­å…è®¸çš„æœ€å¤§ <code>token</code> æ•°é‡</td>
</tr>
<tr>
<td><strong>â€”temperature</strong></td>
<td>æ¸©åº¦å€¼</td>
</tr>
<tr>
<td>â€”top-k</td>
<td>ä¿ç•™ç”¨äºé¡¶kç­›é€‰çš„æœ€é«˜æ¦‚ç‡è¯æ±‡æ ‡è®°æ•°</td>
</tr>
<tr>
<td>â€”top-p</td>
<td>å¦‚æœè®¾ç½®ä¸ºå°äº1çš„æµ®ç‚¹æ•°ï¼Œä»…ä¿ç•™æ¦‚ç‡ç›¸åŠ é«˜äº <code>top_p</code> çš„æœ€å°ä¸€ç»„æœ€æœ‰å¯èƒ½çš„æ ‡è®°</td>
</tr>
<tr>
<td>â€”seed</td>
<td>ç”¨äºå¯é‡ç°æ–‡æœ¬ç”Ÿæˆçš„éšæœºç§å­</td>
</tr>
</tbody>
</table>
</div>
<h2 id="è‡ªå®šä¹‰å¾®è°ƒ"><a href="#è‡ªå®šä¹‰å¾®è°ƒ" class="headerlink" title="è‡ªå®šä¹‰å¾®è°ƒ"></a>è‡ªå®šä¹‰å¾®è°ƒ</h2><blockquote>
<p>ä»¥ <strong><a target="_blank" rel="noopener" href="https://github.com/abachaa/Medication_QA_MedInfo2019">Medication QA</a></strong> <strong>æ•°æ®é›†</strong>ä¸ºä¾‹</p>
</blockquote>
<h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><h4 id="åœºæ™¯éœ€æ±‚"><a href="#åœºæ™¯éœ€æ±‚" class="headerlink" title="åœºæ™¯éœ€æ±‚"></a><strong>åœºæ™¯éœ€æ±‚</strong></h4><p>   åŸºäº InternLM-chat-7B æ¨¡å‹ï¼Œç”¨ MedQA æ•°æ®é›†è¿›è¡Œå¾®è°ƒï¼Œå°†å…¶å¾€<code>åŒ»å­¦é—®ç­”</code>é¢†åŸŸå¯¹é½ã€‚</p>
<h4 id="çœŸå®æ•°æ®é¢„è§ˆ"><a href="#çœŸå®æ•°æ®é¢„è§ˆ" class="headerlink" title="çœŸå®æ•°æ®é¢„è§ˆ"></a><strong>çœŸå®æ•°æ®é¢„è§ˆ</strong></h4><div class="table-container">
<table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>ç­”æ¡ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td>What are ketorolac eye drops?ï¼ˆä»€ä¹ˆæ˜¯é…®å’¯é…¸æ»´çœ¼æ¶²ï¼Ÿï¼‰</td>
<td>Ophthalmic   ketorolac is used to treat itchy eyes caused by allergies. It also is used to   treat swelling and redness (inflammation) that can occur after cataract   surgery. Ketorolac is in a class of medications called nonsteroidal   anti-inflammatory drugs (NSAIDs). It works by stopping the release of   substances that cause allergy symptoms and inflammation.</td>
</tr>
<tr>
<td>What medicines raise blood sugar? ï¼ˆä»€ä¹ˆè¯ç‰©ä¼šå‡é«˜è¡€ç³–ï¼Ÿï¼‰</td>
<td>Some   medicines for conditions other than diabetes can raise your blood sugar   level. This is a concern when you have diabetes. Make sure every doctor you   see knows about all of the medicines, vitamins, or herbal supplements you   take. This means anything you take with or without a prescription. Examples include:     Barbiturates.     Thiazide diuretics.     Corticosteroids.     Birth control pills (oral contraceptives) and progesterone.     Catecholamines.     Decongestants that contain beta-adrenergic agents, such as pseudoephedrine.     The B vitamin niacin. The risk of high blood sugar from niacin lowers after you have taken it for a few months. The antipsychotic medicine olanzapine (Zyprexa).</td>
</tr>
</tbody>
</table>
</div>
<h3 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h3><blockquote>
<p><strong>ä»¥</strong> <strong><a target="_blank" rel="noopener" href="https://github.com/abachaa/Medication_QA_MedInfo2019">Medication QA</a></strong> <strong>æ•°æ®é›†ä¸ºä¾‹</strong></p>
</blockquote>
<p><strong>åŸæ ¼å¼ï¼š(.xlsx)</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/InternLM/tutorial/blob/main/xtuner/MedQA2019.xlsx">https://github.com/InternLM/tutorial/blob/main/xtuner/MedQA2019.xlsx</a></p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>é—®é¢˜</strong></th>
<th>è¯ç‰©ç±»å‹</th>
<th>é—®é¢˜ç±»å‹</th>
<th><strong>å›ç­”</strong></th>
<th>ä¸»é¢˜</th>
<th>URL</th>
</tr>
</thead>
<tbody>
<tr>
<td>aaa</td>
<td>bbb</td>
<td>ccc</td>
<td>ddd</td>
<td>eee</td>
<td>fff</td>
</tr>
</tbody>
</table>
</div>
<h4 id="å°†æ•°æ®è½¬ä¸º-XTuner-çš„æ•°æ®æ ¼å¼"><a href="#å°†æ•°æ®è½¬ä¸º-XTuner-çš„æ•°æ®æ ¼å¼" class="headerlink" title="å°†æ•°æ®è½¬ä¸º XTuner çš„æ•°æ®æ ¼å¼"></a>å°†æ•°æ®è½¬ä¸º XTuner çš„æ•°æ®æ ¼å¼</h4><p><strong>ç›®æ ‡æ ¼å¼ï¼š(.jsonL)</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;conversation&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;system&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;conversation&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;system&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p>ğŸ§ é€šè¿‡ python è„šæœ¬ï¼šå°† <code>.xlsx</code> ä¸­çš„ é—®é¢˜ å’Œ å›ç­” ä¸¤åˆ— æå–å‡ºæ¥ï¼Œå†æ”¾å…¥ <code>.jsonL</code> æ–‡ä»¶çš„æ¯ä¸ª conversation çš„ input å’Œ output ä¸­ã€‚</p>
<blockquote>
<p>è¿™ä¸€æ­¥çš„ python è„šæœ¬å¯ä»¥è¯· ChatGPT æ¥å®Œæˆã€‚</p>
</blockquote>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Write a python file for me. using openpyxl. input file name is MedQA2019.xlsx</span><br><span class="line">Step1: The input file is .xlsx. Exact the column A and column D in the sheet named &quot;DrugQA&quot; .</span><br><span class="line">Step2: Put each value in column A into each &quot;input&quot; of each &quot;conversation&quot;. Put each value in column D into each &quot;output&quot; of each &quot;conversation&quot;.</span><br><span class="line">Step3: The output file is .jsonL. It looks like:</span><br><span class="line">[&#123;</span><br><span class="line">    &quot;conversation&quot;:[</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;system&quot;: &quot;xxx&quot;,</span><br><span class="line">            &quot;input&quot;: &quot;xxx&quot;,</span><br><span class="line">            &quot;output&quot;: &quot;xxx&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    &quot;conversation&quot;:[</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;system&quot;: &quot;xxx&quot;,</span><br><span class="line">            &quot;input&quot;: &quot;xxx&quot;,</span><br><span class="line">            &quot;output&quot;: &quot;xxx&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;]</span><br><span class="line">Step4: All &quot;system&quot; value changes to &quot;You are a professional, highly experienced doctor professor. You always provide accurate, comprehensive, and detailed answers based on the patients&#x27; questions.&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ChatGPT ç”Ÿæˆçš„ python ä»£ç è§<a target="_blank" rel="noopener" href="https://github.com/InternLM/tutorial/tree/main/xtuner/xlsx2jsonl.py">xlsx2jsonl.py</a></p>
</blockquote>
<p>æ‰§è¡Œ python è„šæœ¬ï¼Œè·å¾—æ ¼å¼åŒ–åçš„æ•°æ®é›†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python xlsx2jsonl.py</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æ•°æ®è¿›è¡Œè®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„åˆ†å‰²ï¼ŒåŒæ ·å¯ä»¥è®© ChatGPT å†™ python ä»£ç ã€‚å½“ç„¶å¦‚æœæ²¡æœ‰ä¸¥æ ¼çš„ç§‘ç ”éœ€æ±‚ã€ä¸åœ¨ä¹â€œè®­ç»ƒé›†æ³„éœ²â€çš„é—®é¢˜ï¼Œä¹Ÿå¯ä»¥ä¸åšè®­ç»ƒé›†ä¸æµ‹è¯•é›†çš„åˆ†å‰²ã€‚</p>
<h4 id="åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†"><a href="#åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†" class="headerlink" title="åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†"></a>åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">my .jsonL file looks like:</span><br><span class="line">[&#123;</span><br><span class="line">    &quot;conversation&quot;:[</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;system&quot;: &quot;xxx&quot;,</span><br><span class="line">            &quot;input&quot;: &quot;xxx&quot;,</span><br><span class="line">            &quot;output&quot;: &quot;xxx&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    &quot;conversation&quot;:[</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;system&quot;: &quot;xxx&quot;,</span><br><span class="line">            &quot;input&quot;: &quot;xxx&quot;,</span><br><span class="line">            &quot;output&quot;: &quot;xxx&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;]</span><br><span class="line">Step1, read the .jsonL file.</span><br><span class="line">Step2, count the amount of the &quot;conversation&quot; elements.</span><br><span class="line">Step3, randomly split all &quot;conversation&quot; elements by 7:3. Targeted structure is same as the input.</span><br><span class="line">Step4, save the 7/10 part as train.jsonl. save the 3/10 part as test.jsonl</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆçš„pythonä»£ç è§ <a target="_blank" rel="noopener" href="https://github.com/InternLM/tutorial/blob/main/xtuner//split2train_and_test.py">split2train_and_test.py</a></p>
<h3 id="å¼€å§‹è‡ªå®šä¹‰å¾®è°ƒ"><a href="#å¼€å§‹è‡ªå®šä¹‰å¾®è°ƒ" class="headerlink" title="å¼€å§‹è‡ªå®šä¹‰å¾®è°ƒ"></a>å¼€å§‹è‡ªå®šä¹‰å¾®è°ƒ</h3><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬é‡æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹æ¥ç©â€œå¾®è°ƒè‡ªå®šä¹‰æ•°æ®é›†â€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/ft-medqa &amp;&amp; <span class="built_in">cd</span> ~/ft-medqa</span><br></pre></td></tr></table></figure>
<p>æŠŠå‰é¢ä¸‹è½½å¥½çš„internlm-chat-7bæ¨¡å‹æ–‡ä»¶å¤¹æ‹·è´è¿‡æ¥ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -r ~/ft-oasst1/internlm-chat-7b .</span><br></pre></td></tr></table></figure>
<p>åˆ«å¿˜äº†æŠŠè‡ªå®šä¹‰æ•°æ®é›†ï¼Œå³å‡ ä¸ª <code>.jsonL</code>ï¼Œä¹Ÿä¼ åˆ°æœåŠ¡å™¨ä¸Šã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/InternLM/tutorial</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> ~/tutorial/xtuner/MedQA2019-structured-train.jsonl .</span><br></pre></td></tr></table></figure>
<h4 id="å‡†å¤‡é…ç½®æ–‡ä»¶-1"><a href="#å‡†å¤‡é…ç½®æ–‡ä»¶-1" class="headerlink" title="å‡†å¤‡é…ç½®æ–‡ä»¶"></a>å‡†å¤‡é…ç½®æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤åˆ¶é…ç½®æ–‡ä»¶åˆ°å½“å‰ç›®å½•</span></span><br><span class="line">xtuner copy-cfg internlm_chat_7b_qlora_oasst1_e3 .</span><br><span class="line"><span class="comment"># æ”¹ä¸ªæ–‡ä»¶å</span></span><br><span class="line"><span class="built_in">mv</span> internlm_chat_7b_qlora_oasst1_e3_copy.py internlm_chat_7b_qlora_medqa2019_e3.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹é…ç½®æ–‡ä»¶å†…å®¹</span></span><br><span class="line">vim internlm_chat_7b_qlora_medqa2019_e3.py</span><br></pre></td></tr></table></figure>
<p>å‡å·ä»£è¡¨è¦åˆ é™¤çš„è¡Œï¼ŒåŠ å·ä»£è¡¨è¦å¢åŠ çš„è¡Œã€‚</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># ä¿®æ”¹importéƒ¨åˆ†</span><br><span class="line"><span class="deletion">- from xtuner.dataset.map_fns import oasst1_map_fn, template_map_fn_factory</span></span><br><span class="line"><span class="addition">+ from xtuner.dataset.map_fns import template_map_fn_factory</span></span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹æ¨¡å‹ä¸ºæœ¬åœ°è·¯å¾„</span><br><span class="line"><span class="deletion">- pretrained_model_name_or_path = &#x27;internlm/internlm-chat-7b&#x27;</span></span><br><span class="line"><span class="addition">+ pretrained_model_name_or_path = &#x27;./internlm-chat-7b&#x27;</span></span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹è®­ç»ƒæ•°æ®ä¸º MedQA2019-structured-train.jsonl è·¯å¾„</span><br><span class="line"><span class="deletion">- data_path = &#x27;timdettmers/openassistant-guanaco&#x27;</span></span><br><span class="line"><span class="addition">+ data_path = &#x27;MedQA2019-structured-train.jsonl&#x27;</span></span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹ train_dataset å¯¹è±¡</span><br><span class="line">train_dataset = dict(</span><br><span class="line">    type=process_hf_dataset,</span><br><span class="line"><span class="deletion">-   dataset=dict(type=load_dataset, path=data_path),</span></span><br><span class="line"><span class="addition">+   dataset=dict(type=load_dataset, path=&#x27;json&#x27;, data_files=dict(train=data_path)),</span></span><br><span class="line">    tokenizer=tokenizer,</span><br><span class="line">    max_length=max_length,</span><br><span class="line"><span class="deletion">-   dataset_map_fn=alpaca_map_fn,</span></span><br><span class="line"><span class="addition">+   dataset_map_fn=None,</span></span><br><span class="line">    template_map_fn=dict(</span><br><span class="line">        type=template_map_fn_factory, template=prompt_template),</span><br><span class="line">    remove_unused_columns=True,</span><br><span class="line">    shuffle_before_pack=True,</span><br><span class="line">    pack_to_max_length=pack_to_max_length)</span><br></pre></td></tr></table></figure>
<h4 id="3-3-2-XTunerï¼å¯åŠ¨ï¼"><a href="#3-3-2-XTunerï¼å¯åŠ¨ï¼" class="headerlink" title="3.3.2 XTunerï¼å¯åŠ¨ï¼"></a>3.3.2 <strong>XTunerï¼å¯åŠ¨ï¼</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xtuner train internlm_chat_7b_qlora_medqa2019_e3.py --deepspeed deepspeed_zero2</span><br></pre></td></tr></table></figure>
<h4 id="3-3-3-pth-è½¬-huggingface"><a href="#3-3-3-pth-è½¬-huggingface" class="headerlink" title="3.3.3 pth è½¬ huggingface"></a>3.3.3 pth è½¬ huggingface</h4><p>åŒå‰è¿°ï¼Œè¿™é‡Œä¸èµ˜è¿°äº†ã€‚</p>
<h4 id="3-3-4-éƒ¨ç½²ä¸æµ‹è¯•"><a href="#3-3-4-éƒ¨ç½²ä¸æµ‹è¯•" class="headerlink" title="3.3.4 éƒ¨ç½²ä¸æµ‹è¯•"></a>3.3.4 éƒ¨ç½²ä¸æµ‹è¯•</h4><p>åŒå‰è¿°ã€‚</p>
<h2 id="4ã€è¡¥å……ã€‘ç”¨-MS-Agent-æ•°æ®é›†-èµ‹äºˆ-LLM-ä»¥-Agent-èƒ½åŠ›"><a href="#4ã€è¡¥å……ã€‘ç”¨-MS-Agent-æ•°æ®é›†-èµ‹äºˆ-LLM-ä»¥-Agent-èƒ½åŠ›" class="headerlink" title="4ã€è¡¥å……ã€‘ç”¨ MS-Agent æ•°æ®é›† èµ‹äºˆ LLM ä»¥ Agent èƒ½åŠ›"></a>4ã€è¡¥å……ã€‘ç”¨ MS-Agent æ•°æ®é›† èµ‹äºˆ LLM ä»¥ Agent èƒ½åŠ›</h2><h3 id="4-1-æ¦‚è¿°"><a href="#4-1-æ¦‚è¿°" class="headerlink" title="4.1 æ¦‚è¿°"></a>4.1 æ¦‚è¿°</h3><p>MSAgent æ•°æ®é›†æ¯æ¡æ ·æœ¬åŒ…å«ä¸€ä¸ªå¯¹è¯åˆ—è¡¨ï¼ˆconversationsï¼‰ï¼Œå…¶é‡Œé¢åŒ…å«äº† systemã€userã€assistant ä¸‰ç§å­—æ®µã€‚å…¶ä¸­ï¼š</p>
<ul>
<li><p>system: è¡¨ç¤ºç»™æ¨¡å‹å‰ç½®çš„äººè®¾è¾“å…¥ï¼Œå…¶ä¸­æœ‰å‘Šè¯‰æ¨¡å‹å¦‚ä½•è°ƒç”¨æ’ä»¶ä»¥åŠç”Ÿæˆè¯·æ±‚</p>
</li>
<li><p>user: è¡¨ç¤ºç”¨æˆ·çš„è¾“å…¥ promptï¼Œåˆ†ä¸ºä¸¤ç§ï¼Œé€šç”¨ç”Ÿæˆçš„promptå’Œè°ƒç”¨æ’ä»¶éœ€æ±‚çš„ prompt</p>
</li>
<li><p>assistant: ä¸ºæ¨¡å‹çš„å›å¤ã€‚å…¶ä¸­ä¼šåŒ…æ‹¬æ’ä»¶è°ƒç”¨ä»£ç å’Œæ‰§è¡Œä»£ç ï¼Œè°ƒç”¨ä»£ç æ˜¯è¦ LLM ç”Ÿæˆçš„ï¼Œè€Œæ‰§è¡Œä»£ç æ˜¯è°ƒç”¨æœåŠ¡æ¥ç”Ÿæˆç»“æœçš„</p>
</li>
</ul>
<p>ä¸€æ¡è°ƒç”¨ç½‘é¡µæœç´¢æ’ä»¶æŸ¥è¯¢â€œä¸Šæµ·æ˜å¤©å¤©æ°”â€çš„æ•°æ®æ ·æœ¬ç¤ºä¾‹ã€‚</p>
<h4 id="4-2-1-å‡†å¤‡å·¥ä½œ"><a href="#4-2-1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="4.2.1 å‡†å¤‡å·¥ä½œ"></a>4.2.1 å‡†å¤‡å·¥ä½œ</h4><blockquote>
<p>xtuner æ˜¯ä»å›½å†…çš„ ModelScope å¹³å°ä¸‹è½½ MS-Agent æ•°æ®é›†ï¼Œå› æ­¤ä¸ç”¨æå‰æ‰‹åŠ¨ä¸‹è½½æ•°æ®é›†æ–‡ä»¶ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‡†å¤‡å·¥ä½œ</span></span><br><span class="line"><span class="built_in">mkdir</span> ~/ft-msagent &amp;&amp; <span class="built_in">cd</span> ~/ft-msagent</span><br><span class="line"><span class="built_in">cp</span> -r ~/ft-oasst1/internlm-chat-7b .</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹é…ç½®æ–‡ä»¶</span></span><br><span class="line">xtuner list-cfg | grep msagent</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶é…ç½®æ–‡ä»¶åˆ°å½“å‰ç›®å½•</span></span><br><span class="line">xtuner copy-cfg internlm_7b_qlora_msagent_react_e3_gpu8 .</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„æ¨¡å‹ä¸ºæœ¬åœ°è·¯å¾„</span></span><br><span class="line">vim ./internlm_7b_qlora_msagent_react_e3_gpu8_copy.py </span><br></pre></td></tr></table></figure>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- pretrained_model_name_or_path = &#x27;internlm/internlm-chat-7b&#x27;</span></span><br><span class="line"><span class="addition">+ pretrained_model_name_or_path = &#x27;./internlm-chat-7b&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="4-2-2-å¼€å§‹å¾®è°ƒ"><a href="#4-2-2-å¼€å§‹å¾®è°ƒ" class="headerlink" title="4.2.2 å¼€å§‹å¾®è°ƒ"></a>4.2.2 å¼€å§‹å¾®è°ƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xtuner train ./internlm_7b_qlora_msagent_react_e3_gpu8_copy.py --deepspeed deepspeed_zero2</span><br></pre></td></tr></table></figure>
<h3 id="4-3-ç›´æ¥ä½¿ç”¨"><a href="#4-3-ç›´æ¥ä½¿ç”¨" class="headerlink" title="4.3 ç›´æ¥ä½¿ç”¨"></a>4.3 ç›´æ¥ä½¿ç”¨</h3><blockquote>
<p>ç”±äº msagent çš„è®­ç»ƒéå¸¸è´¹æ—¶ï¼Œå¤§å®¶å¦‚æœæƒ³å°½å¿«æŠŠè¿™ä¸ªæ•™ç¨‹è·Ÿå®Œï¼Œå¯ä»¥ç›´æ¥ä» modelScope æ‹‰å–å’±ä»¬å·²ç»å¾®è°ƒå¥½äº†çš„ Adapterã€‚å¦‚ä¸‹æ¼”ç¤ºã€‚</p>
</blockquote>
<h4 id="4-3-1-ä¸‹è½½-Adapter"><a href="#4-3-1-ä¸‹è½½-Adapter" class="headerlink" title="4.3.1 ä¸‹è½½ Adapter"></a>4.3.1 ä¸‹è½½ Adapter</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/ft-msagent</span><br><span class="line">apt install git git-lfs</span><br><span class="line">git lfs install</span><br><span class="line">git lfs <span class="built_in">clone</span> https://www.modelscope.cn/xtuner/internlm-7b-qlora-msagent-react.git</span><br></pre></td></tr></table></figure>
<p>OKï¼Œç°åœ¨ç›®å½•åº”è¯¥é•¿è¿™æ ·ï¼š</p>
<ul>
<li>internlm_7b_qlora_msagent_react_e3_gpu8_copy.py</li>
<li>internlm-7b-qlora-msagent-react</li>
<li>internlm-chat-7b</li>
<li>work_dirï¼ˆå¯æœ‰å¯æ— ï¼‰</li>
</ul>
<p>æœ‰äº†è¿™ä¸ªåœ¨ msagent ä¸Šè®­ç»ƒå¾—åˆ°çš„Adapterï¼Œæ¨¡å‹ç°åœ¨å·²ç»æœ‰ agent èƒ½åŠ›äº†ï¼å°±å¯ä»¥åŠ  â€”lagent ä»¥è°ƒç”¨æ¥è‡ª lagent çš„ä»£ç†åŠŸèƒ½äº†ï¼</p>
<h4 id="4-3-2-æ·»åŠ -serper-ç¯å¢ƒå˜é‡"><a href="#4-3-2-æ·»åŠ -serper-ç¯å¢ƒå˜é‡" class="headerlink" title="4.3.2 æ·»åŠ  serper ç¯å¢ƒå˜é‡"></a>4.3.2 æ·»åŠ  serper ç¯å¢ƒå˜é‡</h4><blockquote>
<p><strong>å¼€å§‹ chat ä¹‹å‰ï¼Œè¿˜è¦åŠ ä¸ª serper çš„ç¯å¢ƒå˜é‡ï¼š</strong></p>
<p>å» serper.dev å…è´¹æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œç”Ÿæˆè‡ªå·±çš„ api keyã€‚è¿™ä¸ªä¸œè¥¿æ˜¯ç”¨æ¥ç»™ lagent å»è·å– google æœç´¢çš„ç»“æœçš„ã€‚ç­‰äºæ˜¯ serper.dev å¸®ä½ å»è®¿é—® googleï¼Œè€Œä¸æ˜¯ä»ä½ è‡ªå·±æœ¬åœ°å»è®¿é—® google äº†ã€‚</p>
</blockquote>
<p>æ·»åŠ  serper api key åˆ°ç¯å¢ƒå˜é‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> SERPER_API_KEY=abcdefg</span><br></pre></td></tr></table></figure>
<h4 id="4-3-3-xtuner-agentï¼Œå¯åŠ¨ï¼"><a href="#4-3-3-xtuner-agentï¼Œå¯åŠ¨ï¼" class="headerlink" title="4.3.3 xtuner + agentï¼Œå¯åŠ¨ï¼"></a>4.3.3 xtuner + agentï¼Œå¯åŠ¨ï¼</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xtuner chat ./internlm-chat-7b --adapter internlm-7b-qlora-msagent-react --lagent</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a target="_blank" rel="noopener" href="https://github.com/InternLM/tutorial/blob/main/xtuner/README.md">https://github.com/InternLM/tutorial/blob/main/xtuner/README.md</a></p>
<p><a target="_blank" rel="noopener" href="https://broadleaf-gemini-274.notion.site/Lecture4-XTuner-d6399774b18f4818ba8eeb1eceaf7a08">https://broadleaf-gemini-274.notion.site/Lecture4-XTuner-d6399774b18f4818ba8eeb1eceaf7a08</a></p>

        
      </div>

         
    </div>
    
     
  </div>
  
    
<nav id="article-nav">
  <a class="article-nav-btn left "
    
      href="/poster/28e988a7.html"
      title="410-åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼"
     >
    <i class="fa-solid fa-angle-left"></i>
    <p class="title-text">
      
        410-åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼
        
    </p>
  </a>
  <a class="article-nav-btn right "
    
      href="/poster/3ab29489.html"
      title="2788-æŒ‰åˆ†éš”ç¬¦æ‹†åˆ†å­—ç¬¦ä¸²"
     >

    <p class="title-text">
      
        2788-æŒ‰åˆ†éš”ç¬¦æ‹†åˆ†å­—ç¬¦ä¸²
        
    </p>
    <i class="fa-solid fa-angle-right"></i>
  </a>
</nav>


  
</article>


  
  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
  <div id="comment-card" class="comment-card">
    <div class="main-title-bar">
      <div class="main-title-dot"></div>
      <div class="main-title">Comments </div>
    </div>
    <div id="vcomments"></div>
  </div>
  <script>
      new Valine({"enable":true,"appId":null,"appKey":null,"placeholder":"Just go go","pageSize":10,"highlight":true,"serverURLs":null,"el":"#vcomments"});
  </script>



    </div>
    <div id="footer-wrapper">
      <footer id="footer">
  
  <div id="footer-info" class="inner">
    
    &copy; 2024 aqizhoua<br>
    Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & Theme <a target="_blank" rel="noopener" href="https://github.com/saicaca/hexo-theme-vivia">Vivia</a>
  </div>
</footer>

    </div>
    <div class="back-to-top-wrapper">
    <button id="back-to-top-btn" class="back-to-top-btn hide" onclick="topFunction()">
        <i class="fa-solid fa-angle-up"></i>
    </button>
</div>

<script>
    function topFunction() {
        window.scroll({ top: 0, behavior: 'smooth' });
    }
    let btn = document.getElementById('back-to-top-btn');
    function scrollFunction() {
        if (document.body.scrollTop > 600 || document.documentElement.scrollTop > 600) {
            btn.classList.remove('hide')
        } else {
            btn.classList.add('hide')
        }
    }
    window.onscroll = function() {
        scrollFunction();
    }
</script>

  </div>
  <script src="/js/light-dark-switch.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
